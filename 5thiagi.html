<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gérer les Comportements Perturbateurs - Kit Thiagi</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-5px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
            animation: fadeIn 0.3s ease-out forwards;
        }
    </style>
</head>
<body class="bg-slate-50 font-sans text-slate-800 min-h-screen flex flex-col">

    <!-- HEADER -->
    <header class="bg-indigo-700 text-white p-6 shadow-lg">
        <div class="max-w-6xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
            <div>
                <h1 id="app-title" class="text-3xl font-bold flex items-center gap-2">
                    <i data-lucide="users"></i>
                    <span id="header-title-text">Gérer les Comportements Perturbateurs</span>
                </h1>
                <p id="app-subtitle" class="opacity-90 text-sm mt-1">Adapté du Toolkit de Thiagi</p>
            </div>
            <button id="lang-toggle" class="flex items-center gap-2 bg-indigo-800 hover:bg-indigo-900 px-4 py-2 rounded-full transition-all border border-indigo-400">
                <i data-lucide="globe" class="w-4 h-4"></i>
                <span id="lang-btn-text" class="font-semibold">English Version</span>
            </button>
        </div>
    </header>

    <!-- MAIN CONTENT -->
    <main class="max-w-6xl mx-auto px-4 pb-12 flex-grow w-full">
        
        <!-- DISCLAIMER -->
        <div id="disclaimer-container" class="bg-amber-50 border-l-4 border-amber-500 p-6 rounded-r shadow-sm my-6 flex gap-4">
            <!-- Content injected by JS -->
        </div>

        <!-- PRINCIPLES SECTION -->
        <section class="mb-12">
            <div class="flex items-center gap-2 mb-6">
                <i data-lucide="heart" class="text-indigo-600"></i>
                <div>
                    <h2 id="principles-title" class="text-2xl font-bold text-gray-900">Principes Généraux</h2>
                    <p id="principles-subtitle" class="text-gray-500">Les postures clés pour l'animateur jeunesse</p>
                </div>
            </div>
            <div id="principles-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4">
                <!-- Principles injected by JS -->
            </div>
        </section>

        <!-- TOOLKIT SECTION -->
        <section>
            <!-- STICKY CONTROLS -->
            <div class="sticky top-0 z-10 bg-slate-50/95 backdrop-blur py-4 mb-6 border-b border-slate-200">
                <div class="flex flex-col md:flex-row gap-4 justify-between items-center">
                    
                    <!-- Filters -->
                    <div id="filters-container" class="flex flex-wrap gap-2 justify-center md:justify-start">
                        <!-- Filters generated by JS -->
                    </div>

                    <!-- Search -->
                    <div class="relative w-full md:w-64">
                        <i data-lucide="search" class="absolute left-3 top-2.5 text-gray-400 w-4 h-4"></i>
                        <input 
                            type="text" 
                            id="search-input"
                            placeholder="Rechercher..."
                            class="w-full pl-10 pr-4 py-2 rounded-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"
                        />
                    </div>
                </div>
            </div>

            <!-- CARDS GRID -->
            <div id="cards-grid" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Cards injected by JS -->
            </div>
        </section>

    </main>

    <!-- FOOTER -->
    <footer class="bg-gray-800 text-gray-400 py-8 text-center px-4 mt-auto">
        <p id="footer-text" class="max-w-2xl mx-auto text-sm">
            Contenu inspiré du 'Facilitator’s Toolkit' de Sivasailam 'Thiagi' Thiagarajan. Adapté pour le travail jeunesse.
        </p>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- DATA ---
        const disclaimerData = {
            fr: {
                title: "Note importante sur le terme 'Perturbateur' (Disruptive)",
                text: "Dans le monde de l'entreprise et des startups, le mot 'disruptif' est souvent positif (innovant). Ici, le terme anglais 'disruptive' se traduit par 'perturbateur'. Il désigne un comportement qui interrompt ou perturbe le flux du groupe. L'approche n'est jamais de stigmatiser le jeune ('un perturbateur') mais de gérer un comportement spécifique ('un comportement qui perturbe') pour ramener la sécurité dans le groupe."
            },
            en: {
                title: "Important Note on the word 'Disruptive'",
                text: "In the corporate and startup world, 'disruptive' often implies positive innovation. Here, based on 'disruptive behavior', it refers to actions that interrupt the group flow. The approach is never to stigmatize the young person (labelling them 'disruptive') but to manage a specific behavior to restore psychological safety within the group."
            }
        };

        const principlesData = {
            fr: [
                { title: "Confiance Psychologique", desc: "Les jeunes participent mieux sans peur du jugement." },
                { title: "Confiance au Groupe", desc: "Le groupe sait souvent s'autoréguler si on lui laisse l'espace." },
                { title: "Co-construction", desc: "Règles écrites ensemble, reformulées avec leurs mots." },
                { title: "Comportements Aidants", desc: "Valoriser explicitement la coopération et l'écoute." },
                { title: "Responsabilité Partagée", desc: "L'animateur n'est pas un policier, le groupe est co-gardien." },
                { title: "Modélisation", desc: "Incarner ce qu'on attend : écoute, respect, acceptation de la critique." },
                { title: "Fractionner", desc: "Petits groupes = moins de pression sociale, plus de parole." },
                { title: "Binômes/Trinômes", desc: "Le format le plus sécurisant pour les jeunes." },
                { title: "Pauses Réflexives", desc: "S'arrêter pour analyser ce qui se passe dans le groupe." },
                { title: "Espaces Hors-Groupe", desc: "Réguler en aparté, jamais d'humiliation publique." }
            ],
            en: [
                { title: "Psychological Safety", desc: "Youth participate better when free from fear of judgment." },
                { title: "Trust the Group", desc: "The group can often self-regulate if given the space." },
                { title: "Co-construction", desc: "Rules written together, rephrased in their own words." },
                { title: "Helpful Behaviors", desc: "Explicitly value cooperation and listening." },
                { title: "Shared Responsibility", desc: "Facilitator is not police; the group co-guards the frame." },
                { title: "Modeling", desc: "Embody expectations: listening, respect, accepting criticism." },
                { title: "Break it Down", desc: "Small groups = less social pressure, more speaking." },
                { title: "Pairs/Trios", desc: "The safest format for youth expression." },
                { title: "Reflective Pauses", desc: "Stop to analyze what is happening in the here-and-now." },
                { title: "Out-of-Group Spaces", desc: "Regulate in private, never via public humiliation." }
            ]
        };

        const cardsData = [
            // PAROLE
            { id: 1, category: "speech", icon: "message-circle", title: { fr: "Le jeune qui parle trop", en: "The Over-talker" }, goal: { fr: "Redistribuer la parole sans le briser.", en: "Redistribute speech without shutting them down." }, strategies: { fr: ["Tour de parole structuré", "Limite de temps visible (sablier)", "Jetons de parole (ex: 2 max)", "Redirection: 'Qui d'autre ?'", "Donner un rôle (gardien du temps)"], en: ["Structured round-robin", "Visible time limit (hourglass)", "Talking tokens (e.g., 2 max)", "Redirection: 'Who else?'", "Assign a role (timekeeper)"] } },
            { id: 2, category: "speech", icon: "message-circle", title: { fr: "Le jeune qui ne parle pas", en: "The Silent One" }, goal: { fr: "Sécuriser l'expression, pas forcer.", en: "Secure expression, don't force it." }, strategies: { fr: ["Questions simples sans enjeu", "Travail en binôme d'abord", "Reformuler l'idée d'un autre", "Expression écrite (chat/post-it)", "Confier l'inclusion à un pair"], en: ["Simple, low-stakes questions", "Pair work first", "Rephrasing another's idea", "Written expression (chat/post-it)", "Assign inclusion role to a peer"] } },
            { id: 3, category: "speech", icon: "message-circle", title: { fr: "Difficultés à s'exprimer", en: "Difficulty Expressing Themselves" }, goal: { fr: "Laisser le temps, réduire la pression.", en: "Give time, reduce pressure." }, strategies: { fr: ["Ne pas finir ses phrases", "Discussion préalable", "Échange individuel hors séance", "Formats non-verbaux (dessin)"], en: ["Don't finish their sentences", "Pre-session chat", "Individual check-in", "Non-verbal formats (drawing)"] } },
            { id: 4, category: "speech", icon: "activity", title: { fr: "Parle trop fort / doucement", en: "Too Loud / Too Quiet" }, goal: { fr: "Ajuster sans stigmatiser.", en: "Adjust without stigmatizing." }, strategies: { fr: ["Ignorer si non perturbant", "Feedback calme", "Ajustement en aparté", "Jamais de moquerie publique"], en: ["Ignore if not disruptive", "Calm feedback", "Private adjustment", "Never public mockery"] } },
            { id: 5, category: "speech", icon: "book-open", title: { fr: "Langage technique / 'Intello'", en: "Technical / 'Intellectual' Language" }, goal: { fr: "Rendre le contenu accessible.", en: "Make content accessible." }, strategies: { fr: ["Valoriser puis demander reformulation", "Demander au groupe s'ils ont compris", "Traduction collective", "Éviter l'ironie"], en: ["Validate then ask to simplify", "Ask group if they understood", "Collective translation", "Avoid irony"] } },
            { id: 6, category: "speech", icon: "message-circle", title: { fr: "Politiquement correct / Flou", en: "Politically Correct / Vague" }, goal: { fr: "Clarifier sans invalider.", en: "Clarify without invalidating." }, strategies: { fr: ["Demander des exemples concrets", "Rassurer sur la sécurité", "Vérifier la compréhension", "Inviter à parler 'avec ses mots'"], en: ["Ask for concrete examples", "Reassure about safety", "Check understanding", "Invite to speak naturally"] } },
            { id: 7, category: "speech", icon: "heart", title: { fr: "Humour excessif", en: "Excessive Humor" }, goal: { fr: "Canaliser l'énergie, pas l'éteindre.", en: "Channel energy, don't extinguish it." }, strategies: { fr: ["Remercier pour l'ambiance", "Relier l'humour au sujet", "Clarifier les temps Fun vs Focus", "Feedback hors groupe"], en: ["Thank for the vibes", "Link humor to topic", "Clarify Fun vs Focus times", "Feedback outside group"] } },
            { id: 8, category: "speech", icon: "users", title: { fr: "Trop sérieux / Rigide", en: "Too Serious / Rigid" }, goal: { fr: "Ouvrir sans ridiculiser.", en: "Open up without ridiculing." }, strategies: { fr: ["Modéliser la légèreté", "Inviter une réaction créative", "Valoriser le jeu dans l'apprentissage"], en: ["Model lightness", "Invite creative reaction", "Value play in learning"] } },
            { id: 9, category: "speech", icon: "users", title: { fr: "Discussions parallèles", en: "Side Conversations" }, goal: { fr: "Recentrer sans confrontation.", en: "Refocus without confrontation." }, strategies: { fr: ["Invitation à partager au groupe", "Question directe neutre", "Pause silencieuse + regard", "Proximité physique calme"], en: ["Invite to share with group", "Direct neutral question", "Silent pause + eye contact", "Calm physical proximity"] } },
            { id: 10, category: "speech", icon: "users", title: { fr: "Parle uniquement à l'animateur", en: "Only speaks to Facilitator" }, goal: { fr: "Horizontaliser.", en: "Flatten hierarchy." }, strategies: { fr: ["Rappeler que le groupe est l'interlocuteur", "Éviter le contact visuel exclusif", "Attendre qu'un pair réagisse"], en: ["Remind group is the audience", "Avoid exclusive eye contact", "Wait for peer reaction"] } },
            
            // ENGAGEMENT
            { id: 11, category: "engagement", icon: "activity", title: { fr: "Ne fait pas les tâches", en: "Doesn't do the tasks" }, goal: { fr: "Responsabiliser sans punir.", en: "Empower without punishing." }, strategies: { fr: ["Tours de partage", "Travail en duo", "Consignes claires et réalistes", "Rappels doux en amont"], en: ["Sharing rounds", "Pair work", "Clear realistic instructions", "Gentle reminders beforehand"] } },
            { id: 12, category: "engagement", icon: "book-open", title: { fr: "Monsieur Je-Sais-Tout", en: "Mr. Know-It-All" }, goal: { fr: "Ralentir et réintégrer le collectif.", en: "Slow down and reintegrate." }, strategies: { fr: ["Valoriser l'engagement", "Expliquer l'importance du collectif", "Donner un rôle d'exploration complémentaire"], en: ["Value engagement", "Explain importance of process", "Assign complementary exploration role"] } },
            { id: 13, category: "engagement", icon: "users", title: { fr: "S'implique sous supervision", en: "Only works under supervision" }, goal: { fr: "Développer l'autonomie.", en: "Develop autonomy." }, strategies: { fr: ["Responsabilités croisées", "Contrats de groupe", "Clarification des livrables", "Formation de pairs facilitateurs"], en: ["Cross-responsibilities", "Group contracts", "Clarify deliverables", "Train peer facilitators"] } },
            
            // TIME
            { id: 14, category: "time", icon: "clock", title: { fr: "Impatient / Veut aller vite", en: "Impatient / Rusher" }, goal: { fr: "Canaliser vers l'analyse.", en: "Channel towards analysis." }, strategies: { fr: ["Agenda clair et rythmé", "Rôle d'analyste ou synthèse", "Temps bornés"], en: ["Clear rhythmic agenda", "Analyst or synthesizer role", "Timeboxing"] } },
            { id: 15, category: "time", icon: "clock", title: { fr: "Digressions fréquentes", en: "Frequent Digressions" }, goal: { fr: "Recadrer sans couper.", en: "Refocus without cutting off." }, strategies: { fr: ["Rappels au cadre", "Questions ciblées", "Parking à idées"], en: ["Frame reminders", "Targeted questions", "Idea Parking Lot"] } },
            { id: 16, category: "time", icon: "search", title: { fr: "Trop dans les détails", en: "Too Detailed" }, goal: { fr: "Rester au bon niveau.", en: "Stay at right level." }, strategies: { fr: ["Clarifier le niveau attendu", "Reporter les détails", "Demander une synthèse écrite"], en: ["Clarify expected level", "Defer details", "Ask for written summary"] } },
            { id: 17, category: "time", icon: "clock", title: { fr: "Retards / Départs anticipés", en: "Lateness / Early Exits" }, goal: { fr: "Responsabiliser collectivement.", en: "Collective responsibility." }, strategies: { fr: ["Règles co-construites", "Ne pas 'récompenser' les retards", "Binômes de ponctualité", "Respect strict des horaires"], en: ["Co-constructed rules", "Don't 'reward' lateness", "Punctuality pairs", "Strict time adherence"] } },
            { id: 18, category: "time", icon: "message-circle", title: { fr: "Téléphone / Messages", en: "Phone / Messages" }, goal: { fr: "Poser un cadre réaliste.", en: "Set realistic frame." }, strategies: { fr: ["Règle claire dès le début", "Pauses prévues", "Choix assumé de participation"], en: ["Clear initial rule", "Scheduled breaks", "Conscious choice to participate"] } },
            
            // TENSIONS
            { id: 19, category: "tension", icon: "alert-triangle", title: { fr: "Défensivité", en: "Defensiveness" }, goal: { fr: "Désamorcer.", en: "Defuse." }, strategies: { fr: ["Blâmer le processus, pas la personne", "Pause", "Travail en petits groupes"], en: ["Blame process, not person", "Break/Pause", "Small group work"] } },
            { id: 20, category: "tension", icon: "heart", title: { fr: "Forte charge émotionnelle", en: "High Emotional Load" }, goal: { fr: "Accueillir sans déborder.", en: "Welcome without overflowing." }, strategies: { fr: ["Reconnaître l'émotion", "Pause réflexive", "Retour progressif au sujet"], en: ["Acknowledge emotion", "Reflective pause", "Progressive return to topic"] } },
            { id: 21, category: "tension", icon: "activity", title: { fr: "Prudence excessive", en: "Excessive Caution" }, goal: { fr: "Relancer l'action.", en: "Restart action." }, strategies: { fr: ["Tests pilotes", "Décisions temporaires", "Rôles différenciés"], en: ["Pilot tests", "Temporary decisions", "Differentiated roles"] } },
            { id: 22, category: "tension", icon: "alert-triangle", title: { fr: "Résistance", en: "Resistance" }, goal: { fr: "Comprendre avant convaincre.", en: "Understand before convincing." }, strategies: { fr: ["Discussion sur les impacts", "Analyse coûts/bénéfices", "Pas de pression"], en: ["Discuss impacts", "Cost/benefit analysis", "No pressure"] } },
            { id: 23, category: "tension", icon: "alert-triangle", title: { fr: "Recherche d'attention", en: "Attention Seeking" }, goal: { fr: "Redistribuer la visibilité.", en: "Redistribute visibility." }, strategies: { fr: ["Ignorer provocations", "Temps de parole équitable", "Échange individuel"], en: ["Ignore provocations", "Equal speaking time", "Individual chat"] } },
            { id: 24, category: "tension", icon: "activity", title: { fr: "Contestation systématique", en: "Systematic Challenge" }, goal: { fr: "Structurer le conflit.", en: "Structure the conflict." }, strategies: { fr: ["Rôle d'avocat du diable", "Débats structurés", "Rotation des rôles"], en: ["Devil's advocate role", "Structured debates", "Role rotation"] } },
            { id: 25, category: "tension", icon: "users", title: { fr: "Refus de participation", en: "Refusal to Participate" }, goal: { fr: "Recréer un point d'entrée.", en: "Recreate entry point." }, strategies: { fr: ["Binômes", "Groupes réduits", "Expression anonyme", "Soutien par les pairs"], en: ["Pairs", "Small groups", "Anonymous expression", "Peer support"] } },
            { id: 26, category: "tension", icon: "alert-triangle", title: { fr: "Colères / Explosions", en: "Anger / Explosions" }, goal: { fr: "Protéger le groupe.", en: "Protect the group." }, strategies: { fr: ["Rester calme", "Pause immédiate", "Reformulation", "Discussion différée"], en: ["Stay calm", "Immediate break", "Rephrasing", "Deferred discussion"] } },
            { id: 27, category: "tension", icon: "alert-triangle", title: { fr: "Propos sexistes/racistes", en: "Sexist/Racist Remarks" }, goal: { fr: "Poser une limite claire.", en: "Set clear boundary." }, strategies: { fr: ["Ne jamais ignorer", "Nommer l'impact", "Responsabiliser sans humilier", "Excuses si erreur"], en: ["Never ignore", "Name the impact", "Accountability no humiliation", "Apologies if error"] } },
            { id: 29, category: "tension", icon: "users", title: { fr: "Se tait devant les adultes/autorité", en: "Silent around Adults/Authority" }, goal: { fr: "Rééquilibrer le pouvoir.", en: "Rebalance power." }, strategies: { fr: ["Rôles tournants", "Modélisation par adultes", "Feedback constructif", "Outils anonymes"], en: ["Rotating roles", "Adult modeling", "Constructive feedback", "Anonymous tools"] } }
        ];

        const uiText = {
            fr: {
                appTitle: "Gérer les Comportements Perturbateurs",
                appSubtitle: "Adapté du Toolkit de Thiagi",
                principlesTitle: "Principes Généraux",
                principlesSubtitle: "Les postures clés pour l'animateur jeunesse",
                searchPlaceholder: "Rechercher...",
                filters: { all: "Tout", speech: "Parole", engagement: "Engagement", time: "Temps", tension: "Tensions/Émotions" },
                footer: "Contenu inspiré du 'Facilitator’s Toolkit' de Sivasailam 'Thiagi' Thiagarajan. Adapté pour le travail jeunesse."
            },
            en: {
                appTitle: "Managing Disruptive Behaviors",
                appSubtitle: "Adapted from Thiagi's Toolkit",
                principlesTitle: "General Principles",
                principlesSubtitle: "Key postures for youth facilitators",
                searchPlaceholder: "Search behavior...",
                filters: { all: "All", speech: "Speech", engagement: "Engagement", time: "Time", tension: "Tension/Emotions" },
                footer: "Content inspired by Sivasailam 'Thiagi' Thiagarajan's Facilitator’s Toolkit. Adapted for youth work."
            }
        };

        const filterIcons = {
            all: 'book-open',
            speech: 'message-circle',
            engagement: 'activity',
            time: 'clock',
            tension: 'alert-triangle'
        };

        // --- STATE ---
        let state = {
            lang: 'fr',
            filter: 'all',
            search: '',
            openCardId: null
        };

        // --- DOM ELEMENTS ---
        const els = {
            headerTitleText: document.getElementById('header-title-text'),
            appSubtitle: document.getElementById('app-subtitle'),
            langBtnText: document.getElementById('lang-btn-text'),
            langToggle: document.getElementById('lang-toggle'),
            disclaimerContainer: document.getElementById('disclaimer-container'),
            principlesTitle: document.getElementById('principles-title'),
            principlesSubtitle: document.getElementById('principles-subtitle'),
            principlesGrid: document.getElementById('principles-grid'),
            filtersContainer: document.getElementById('filters-container'),
            searchInput: document.getElementById('search-input'),
            cardsGrid: document.getElementById('cards-grid'),
            footerText: document.getElementById('footer-text')
        };

        // --- RENDER FUNCTIONS ---

        function renderHeader() {
            els.headerTitleText.textContent = uiText[state.lang].appTitle;
            els.appSubtitle.textContent = uiText[state.lang].appSubtitle;
            els.langBtnText.textContent = state.lang === 'fr' ? "English Version" : "Version Française";
            els.searchInput.placeholder = uiText[state.lang].searchPlaceholder;
            els.principlesTitle.textContent = uiText[state.lang].principlesTitle;
            els.principlesSubtitle.textContent = uiText[state.lang].principlesSubtitle;
            els.footerText.textContent = uiText[state.lang].footer;
        }

        function renderDisclaimer() {
            const data = disclaimerData[state.lang];
            els.disclaimerContainer.innerHTML = `
                <i data-lucide="info" class="text-amber-600 flex-shrink-0 mt-1 w-6 h-6"></i>
                <div>
                    <h3 class="font-bold text-amber-800 text-lg mb-1">${data.title}</h3>
                    <p class="text-amber-900 leading-relaxed">${data.text}</p>
                </div>
            `;
        }

        function renderPrinciples() {
            const list = principlesData[state.lang];
            els.principlesGrid.innerHTML = list.map(p => `
                <div class="bg-white p-4 rounded-lg shadow border-l-4 border-indigo-500 hover:shadow-md transition-shadow">
                    <h4 class="font-bold text-indigo-900 mb-1">${p.title}</h4>
                    <p class="text-gray-600 text-sm">${p.desc}</p>
                </div>
            `).join('');
        }

        function renderFilters() {
            const filters = ['all', 'speech', 'engagement', 'time', 'tension'];
            els.filtersContainer.innerHTML = filters.map(f => {
                const isActive = state.filter === f;
                const label = uiText[state.lang].filters[f];
                const icon = filterIcons[f];
                const activeClass = isActive 
                    ? 'bg-indigo-600 text-white shadow-md' 
                    : 'bg-white text-gray-600 border border-gray-200 hover:bg-gray-50';
                
                return `
                    <button 
                        onclick="setFilter('${f}')"
                        class="flex items-center gap-2 px-4 py-2 rounded-full text-sm font-semibold transition-all ${activeClass}"
                    >
                        <i data-lucide="${icon}" class="w-4 h-4"></i>
                        ${label}
                    </button>
                `;
            }).join('');
        }

        function renderCards() {
            const searchText = state.search.toLowerCase();
            const filtered = cardsData.filter(card => {
                const matchesFilter = state.filter === 'all' || card.category === state.filter;
                const matchesSearch = 
                    card.title[state.lang].toLowerCase().includes(searchText) || 
                    card.goal[state.lang].toLowerCase().includes(searchText);
                return matchesFilter && matchesSearch;
            });

            if (filtered.length === 0) {
                els.cardsGrid.innerHTML = `
                    <div class="col-span-full text-center py-12 text-gray-500">
                        <p>${state.lang === 'fr' ? "Aucun résultat trouvé." : "No results found."}</p>
                    </div>
                `;
                return;
            }

            els.cardsGrid.innerHTML = filtered.map(card => {
                const isOpen = state.openCardId === card.id;
                const borderClass = isOpen ? 'border-indigo-500 ring-2 ring-indigo-100' : 'border-gray-200 hover:border-indigo-300';
                const iconBgClass = isOpen ? 'bg-indigo-100 text-indigo-600' : 'bg-gray-100 text-gray-500';
                const rotateClass = isOpen ? 'rotate-180' : '';
                
                let strategiesHtml = '';
                if (isOpen) {
                    const strategiesList = card.strategies[state.lang].map(s => `
                        <li class="flex items-start gap-2 text-gray-700">
                            <span class="text-indigo-500 font-bold">•</span>
                            ${s}
                        </li>
                    `).join('');
                    
                    strategiesHtml = `
                        <div class="bg-indigo-50 px-6 py-5 border-t border-indigo-100 animate-fadeIn">
                            <h4 class="font-bold text-indigo-900 mb-3 text-sm uppercase flex items-center gap-2">
                                <i data-lucide="activity" class="w-4 h-4"></i>
                                ${state.lang === 'fr' ? "Stratégies d'intervention" : "Intervention Strategies"}
                            </h4>
                            <ul class="space-y-2">${strategiesList}</ul>
                        </div>
                    `;
                }

                return `
                    <div class="bg-white rounded-xl shadow-md overflow-hidden transition-all duration-300 border ${borderClass}">
                        <div 
                            onclick="toggleCard(${card.id})"
                            class="p-5 cursor-pointer flex justify-between items-center select-none"
                        >
                            <div class="flex items-center gap-3">
                                <div class="p-2 rounded-full ${iconBgClass}">
                                    <i data-lucide="${card.icon}" class="w-6 h-6"></i>
                                </div>
                                <div>
                                    <h3 class="font-bold text-gray-800 text-lg">${card.title[state.lang]}</h3>
                                    <p class="text-xs text-gray-500 uppercase tracking-wider font-semibold mt-0.5">
                                        ${state.lang === 'fr' ? "Objectif :" : "Goal:"} ${card.goal[state.lang]}
                                    </p>
                                </div>
                            </div>
                            <div class="transform transition-transform duration-300 ${rotateClass}">
                                <i data-lucide="chevron-down" class="w-6 h-6 text-gray-400"></i>
                            </div>
                        </div>
                        ${strategiesHtml}
                    </div>
                `;
            }).join('');
        }

        function refreshIcons() {
            lucide.createIcons();
        }

        function renderAll() {
            renderHeader();
            renderDisclaimer();
            renderPrinciples();
            renderFilters();
            renderCards();
            refreshIcons();
        }

        // --- ACTIONS ---

        window.setFilter = (filter) => {
            state.filter = filter;
            renderFilters();
            renderCards();
            refreshIcons();
        };

        window.toggleCard = (id) => {
            state.openCardId = state.openCardId === id ? null : id;
            renderCards();
            refreshIcons();
        };

        // --- LISTENERS ---

        els.langToggle.addEventListener('click', () => {
            state.lang = state.lang === 'fr' ? 'en' : 'fr';
            renderAll();
        });

        els.searchInput.addEventListener('input', (e) => {
            state.search = e.target.value;
            renderCards();
            refreshIcons();
        });

        // --- INIT ---
        renderAll();

    </script>
</body>
</html>
