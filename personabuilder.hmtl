<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VI-ACT Persona Builder</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700;900&family=Patrick+Hand&display=swap');

        :root {
            --primary: #6366f1;
            --primary-dark: #4338ca;
            --bg-grad-start: #f8fafc;
            --bg-grad-end: #e2e8f0;
        }

        body {
            font-family: 'Outfit', sans-serif;
            background: linear-gradient(135deg, var(--bg-grad-start) 0%, var(--bg-grad-end) 100%);
            color: #1e293b;
        }

        .handwritten {
            font-family: 'Patrick Hand', cursive;
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.5);
        }

        /* Card Styles */
        .persona-card {
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            background: white;
            print-color-adjust: exact;
            -webkit-print-color-adjust: exact;
        }
        
        @media (min-width: 1024px) {
            .persona-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 35px 60px -15px rgba(0, 0, 0, 0.2);
            }
        }

        /* Custom Range Slider */
        input[type=range] {
            -webkit-appearance: none; 
            background: transparent; 
        }
        
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 16px;
            width: 16px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            margin-top: -6px; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 4px;
            cursor: pointer;
            background: #e2e8f0;
            border-radius: 2px;
        }

        /* Checkbox Custom */
        .checkbox-wrapper input:checked + div {
            background-color: var(--primary);
            border-color: var(--primary);
            color: white;
        }

        /* Utilities */
        .tip-box {
            border-left: 4px solid var(--primary);
            background-color: #eef2ff;
        }

        .tag-pill {
            background: #f1f5f9;
            border: 1px solid #e2e8f0;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
            color: #475569;
            display: inline-block;
            margin-right: 4px;
            margin-bottom: 4px;
        }

        /* PRINT STYLES */
        @media print {
            body {
                background: white;
                margin: 0;
                padding: 0;
                overflow: visible !important;
            }
            nav, .left-column, #preview-header, #preview-footer, .no-print {
                display: none !important;
            }
            main {
                display: block !important;
                padding: 0 !important;
                margin: 0 !important;
                width: 100% !important;
            }
            .right-column {
                width: 100% !important;
                position: static !important;
                display: block !important;
            }
            .persona-card {
                box-shadow: none !important;
                transform: none !important;
                border: none !important;
                width: 100% !important;
                max-width: 1000px !important; 
                margin: 0 auto !important;
                page-break-inside: avoid;
            }
            /* Force background graphics */
            * {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }
            @page {
                size: A4 portrait;
                margin: 0.5cm;
            }
        }
    </style>
</head>
<body class="min-h-screen overflow-x-hidden">

    <!-- Navbar -->
    <nav class="w-full px-6 py-4 flex justify-between items-center glass-panel sticky top-0 z-50">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 bg-indigo-600 rounded-xl flex items-center justify-center text-white font-bold text-lg shadow-lg shadow-indigo-200">V</div>
            <div>
                <h1 class="font-bold text-xl leading-none text-slate-800" id="nav-title">VI-ACT Persona Builder</h1>
            </div>
        </div>
        <div class="flex gap-2 bg-slate-100 p-1 rounded-full border border-slate-200">
            <button onclick="setLang('fr')" id="btn-fr" class="px-4 py-1.5 rounded-full text-xs font-bold transition-all bg-white shadow-sm text-indigo-600">FR</button>
            <button onclick="setLang('en')" id="btn-en" class="px-4 py-1.5 rounded-full text-xs font-bold transition-all text-slate-500 hover:text-indigo-600">EN</button>
        </div>
    </nav>

    <main class="container mx-auto p-4 lg:p-8 grid grid-cols-1 lg:grid-cols-12 gap-8">

        <!-- LEFT COLUMN: Editor -->
        <div class="left-column lg:col-span-5 flex flex-col gap-6 animate-fade-in pb-20">
            
            <!-- Actions -->
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100">
                <h2 class="text-xl font-bold mb-2 text-indigo-900" id="intro-title">Définition du Profil</h2>
                <div class="flex gap-2 mt-4 flex-wrap">
                    <button onclick="generateRandom()" class="flex-1 bg-indigo-600 text-white px-4 py-3 rounded-xl text-sm font-bold shadow-lg shadow-indigo-200 hover:bg-indigo-700 transition flex items-center justify-center gap-2 group">
                        <i class="fa-solid fa-wand-magic-sparkles group-hover:rotate-12 transition"></i> <span id="btn-magic">Génération Magique</span>
                    </button>
                    <button onclick="resetForm()" class="px-4 py-3 rounded-xl bg-slate-100 text-slate-600 hover:bg-slate-200 transition" title="Reset">
                        <i class="fa-solid fa-rotate-right"></i>
                    </button>
                </div>
            </div>

            <!-- Form Container -->
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-100 flex flex-col gap-5">
                
                <!-- Section: Identity -->
                <div>
                    <h3 class="text-xs font-black text-slate-300 uppercase tracking-widest mb-4 flex items-center gap-2">
                        <span class="w-2 h-2 rounded-full bg-indigo-500"></span> <span id="sec-identity">Identité</span>
                    </h3>
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <div class="input-group">
                            <label class="block text-xs font-bold text-slate-500 mb-1" id="lbl-name">Prénom & Nom Fictif</label>
                            <input type="text" id="input-name" class="w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition" oninput="updatePreview(); resetAvatarOffset()">
                        </div>
                        <div class="input-group">
                            <label class="block text-xs font-bold text-slate-500 mb-1" id="lbl-job">Activité / Rôle</label>
                            <input type="text" id="input-job" class="w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 outline-none transition" oninput="updatePreview()">
                        </div>
                    </div>
                    <div class="grid grid-cols-3 gap-4">
                        <div class="input-group col-span-1">
                            <label class="block text-xs font-bold text-slate-500 mb-1" id="lbl-age">Âge</label>
                            <input type="number" id="input-age" class="w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg outline-none focus:border-indigo-500 transition" oninput="updatePreview()">
                        </div>
                        <div class="input-group col-span-2">
                            <label class="block text-xs font-bold text-slate-500 mb-1" id="lbl-status">Situation</label>
                            <select id="input-status" class="w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg outline-none focus:border-indigo-500 transition cursor-pointer" onchange="updatePreview()">
                                <!-- Populated by JS -->
                            </select>
                        </div>
                    </div>
                </div>

                <hr class="border-slate-100">

                <!-- Section: Narrative -->
                <div>
                    <h3 class="text-xs font-black text-slate-300 uppercase tracking-widest mb-4 flex items-center gap-2">
                        <span class="w-2 h-2 rounded-full bg-pink-500"></span> <span id="sec-narrative">Narratif & Contexte</span>
                    </h3>
                    
                    <div class="input-group mb-4">
                        <label class="block text-xs font-bold text-slate-500 mb-1" id="lbl-quote">La Citation (Verbatim)</label>
                        <input type="text" id="input-quote" class="w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg italic text-slate-600 outline-none focus:border-pink-500 transition" oninput="updatePreview()">
                    </div>

                    <div class="input-group mb-4">
                        <label class="block text-xs font-bold text-slate-500 mb-1" id="lbl-bio">Bio Courte</label>
                        <textarea id="input-bio" rows="2" class="w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm outline-none focus:border-pink-500 transition resize-none" oninput="updatePreview()"></textarea>
                    </div>

                    <!-- Day in the Life -->
                    <div class="input-group">
                        <label class="block text-xs font-bold text-pink-600 mb-1" id="lbl-day">Une journée dans sa vie</label>
                        <textarea id="input-day" rows="4" class="w-full px-3 py-2 bg-pink-50 border border-pink-100 rounded-lg text-sm outline-none focus:border-pink-500 transition resize-none" placeholder="8h: Se réveille... 12h: Déjeuner sur le pouce..." oninput="updatePreview()"></textarea>
                    </div>
                </div>

                <hr class="border-slate-100">

                <!-- Section: Habits & Digital -->
                <div>
                    <h3 class="text-xs font-black text-slate-300 uppercase tracking-widest mb-4 flex items-center gap-2">
                        <span class="w-2 h-2 rounded-full bg-blue-500"></span> <span id="sec-digital">Habitudes Digitales</span>
                    </h3>

                    <div class="input-group mb-4">
                        <label class="block text-xs font-bold text-slate-500 mb-2">Équipements utilisés</label>
                        <div class="flex gap-2">
                            <label class="checkbox-wrapper cursor-pointer">
                                <input type="checkbox" id="chk-mobile" class="hidden" onchange="updatePreview()">
                                <div class="px-3 py-1.5 rounded-lg border border-slate-200 text-xs font-bold text-slate-500 transition hover:bg-slate-50"><i class="fa-solid fa-mobile-screen"></i> Mobile</div>
                            </label>
                            <label class="checkbox-wrapper cursor-pointer">
                                <input type="checkbox" id="chk-desktop" class="hidden" onchange="updatePreview()">
                                <div class="px-3 py-1.5 rounded-lg border border-slate-200 text-xs font-bold text-slate-500 transition hover:bg-slate-50"><i class="fa-solid fa-desktop"></i> PC/Mac</div>
                            </label>
                            <label class="checkbox-wrapper cursor-pointer">
                                <input type="checkbox" id="chk-tablet" class="hidden" onchange="updatePreview()">
                                <div class="px-3 py-1.5 rounded-lg border border-slate-200 text-xs font-bold text-slate-500 transition hover:bg-slate-50"><i class="fa-solid fa-tablet-screen-button"></i> Tablette</div>
                            </label>
                        </div>
                    </div>

                    <div class="input-group mb-4">
                         <label class="block text-xs font-bold text-slate-500 mb-1" id="lbl-platforms">Plateformes & App favorites</label>
                         <input type="text" id="input-platforms" class="w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg outline-none focus:border-blue-500 transition text-sm" placeholder="Instagram, Slack, Excel..." oninput="updatePreview()">
                    </div>

                    <div class="input-group">
                        <div class="flex justify-between mb-1">
                            <label class="text-xs font-bold text-slate-500" id="lbl-tech">Aisance Numérique</label>
                            <span id="tech-val" class="text-xs font-bold text-blue-600">50%</span>
                        </div>
                        <input type="range" id="input-tech" min="0" max="100" class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-blue-500" oninput="updatePreview()">
                    </div>
                </div>

                <hr class="border-slate-100">

                <!-- Section: Psychology & Motivations -->
                <div>
                    <h3 class="text-xs font-black text-slate-300 uppercase tracking-widest mb-4 flex items-center gap-2">
                        <span class="w-2 h-2 rounded-full bg-teal-500"></span> <span id="sec-psych">Psychologie & Motivations</span>
                    </h3>

                    <div class="input-group mb-4">
                        <label class="block text-xs font-bold text-slate-500 mb-1" id="lbl-interests">Centres d'intérêt (tags)</label>
                        <input type="text" id="input-interests" class="w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg outline-none focus:border-teal-500 transition text-sm" placeholder="Voyage, Cuisine, Tech..." oninput="updatePreview()">
                    </div>
                    
                    <div class="space-y-4 mb-4 bg-slate-50 p-4 rounded-xl border border-slate-100">
                         <!-- Slider 1 -->
                         <div class="flex items-center justify-between text-xs">
                             <span class="text-slate-500 w-16 text-right" id="lbl-introvert">Introverti</span>
                             <input type="range" id="input-intro-extra" min="0" max="100" class="mx-2 w-full accent-teal-500" oninput="updatePreview()">
                             <span class="text-slate-500 w-16" id="lbl-extrovert">Extroverti</span>
                         </div>
                         <!-- Slider 2 -->
                         <div class="flex items-center justify-between text-xs">
                            <span class="text-slate-500 w-16 text-right" id="lbl-thinking">Rationnel</span>
                            <input type="range" id="input-think-feel" min="0" max="100" class="mx-2 w-full accent-teal-500" oninput="updatePreview()">
                            <span class="text-slate-500 w-16" id="lbl-feeling">Émotionnel</span>
                        </div>
                        <!-- Slider 3 -->
                        <div class="flex items-center justify-between text-xs">
                            <span class="text-slate-500 w-16 text-right" id="lbl-passive">Passif</span>
                            <input type="range" id="input-passive-active" min="0" max="100" class="mx-2 w-full accent-teal-500" oninput="updatePreview()">
                            <span class="text-slate-500 w-16" id="lbl-active">Actif</span>
                        </div>
                    </div>

                    <!-- NEW MOTIVATION SLIDER -->
                    <div class="space-y-2">
                        <label class="block text-xs font-bold text-slate-500 mb-1" id="lbl-motivation">Type de Motivation</label>
                        <div class="flex items-center justify-between text-xs">
                            <span class="text-slate-400 w-16 text-right" id="lbl-fun">Fun / Plaisir</span>
                            <input type="range" id="input-driver-motivation" min="0" max="100" class="mx-2 w-full accent-teal-600 h-1 bg-slate-200 rounded" oninput="updatePreview()">
                            <span class="text-slate-400 w-16" id="lbl-useful">Utile / Apprentissage</span>
                        </div>
                    </div>
                </div>

                <hr class="border-slate-100">

                <!-- Section: Goals/Frustrations -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="input-group">
                        <label class="block text-xs font-bold text-green-600 mb-1" id="lbl-goals">Attentes / Objectifs</label>
                        <textarea id="input-goals" rows="4" class="w-full px-3 py-2 bg-green-50 border border-green-100 rounded-lg text-sm focus:border-green-400 outline-none resize-none" oninput="updatePreview()"></textarea>
                    </div>
                    <div class="input-group">
                        <label class="block text-xs font-bold text-red-500 mb-1" id="lbl-frustrations">Peurs & Freins</label>
                        <textarea id="input-frustrations" rows="4" class="w-full px-3 py-2 bg-red-50 border border-red-100 rounded-lg text-sm focus:border-red-400 outline-none resize-none" oninput="updatePreview()"></textarea>
                    </div>
                </div>

            </div>
        </div>

        <!-- RIGHT COLUMN: Preview -->
        <div class="right-column lg:col-span-7 flex flex-col items-center justify-start lg:sticky lg:top-8 h-fit pb-10">
            
            <div class="w-full flex justify-between items-center mb-4 px-1" id="preview-header">
                <span class="text-xs font-bold tracking-widest text-slate-400 uppercase" id="preview-label">Aperçu de la fiche</span>
                
                <!-- Export Action -->
                <button onclick="window.print()" class="bg-slate-800 text-white px-4 py-2 rounded-lg text-xs font-bold hover:bg-black transition flex items-center gap-2 shadow-lg">
                    <i class="fa-solid fa-file-pdf"></i> <span id="btn-print">Télécharger PDF</span>
                </button>
            </div>

            <!-- THE CARD -->
            <div id="capture-area" class="persona-card w-full max-w-2xl bg-white rounded-[24px] overflow-hidden relative border border-slate-200">
                
                <!-- Header Art -->
                <div class="h-32 bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-500 relative overflow-hidden">
                    <div class="absolute -bottom-10 -right-10 w-40 h-40 bg-white opacity-10 rounded-full blur-2xl"></div>
                    <div class="absolute top-10 left-10 w-20 h-20 bg-yellow-400 opacity-20 rounded-full blur-xl"></div>
                    <!-- Interests as floating tags in header -->
                    <div id="header-interests" class="absolute bottom-2 right-4 flex gap-1 justify-end flex-wrap max-w-[60%]">
                        <!-- populated by js -->
                    </div>
                </div>

                <div class="px-8 lg:px-10 pb-10">
                    
                    <!-- Top Row: Avatar & Name -->
                    <div class="flex flex-col sm:flex-row items-center sm:items-end -mt-12 mb-6 gap-6 text-center sm:text-left relative z-10">
                        
                        <!-- Avatar -->
                        <div class="relative group shrink-0">
                            <div class="w-28 h-28 rounded-2xl bg-white p-1 shadow-lg group-hover:rotate-1 transition-all duration-300">
                                <img id="card-avatar" src="" alt="Avatar" class="w-full h-full rounded-xl object-cover bg-slate-50">
                            </div>
                            <!-- Avatar Controls (Hidden in Print) -->
                            <div class="absolute top-1/2 -translate-y-1/2 -left-4 w-[130%] flex justify-between pointer-events-none no-print">
                                <button onclick="changeAvatar(-1)" class="w-8 h-8 bg-white text-slate-700 rounded-full shadow-md flex items-center justify-center pointer-events-auto hover:bg-indigo-50 hover:text-indigo-600 transition cursor-pointer border border-slate-100 transform hover:scale-110">
                                    <i class="fa-solid fa-chevron-left text-xs"></i>
                                </button>
                                <button onclick="changeAvatar(1)" class="w-8 h-8 bg-white text-slate-700 rounded-full shadow-md flex items-center justify-center pointer-events-auto hover:bg-indigo-50 hover:text-indigo-600 transition cursor-pointer border border-slate-100 transform hover:scale-110">
                                    <i class="fa-solid fa-chevron-right text-xs"></i>
                                </button>
                            </div>
                        </div>

                        <div class="flex-1 mb-1">
                            <h2 id="card-name" class="text-3xl font-extrabold text-slate-900 leading-tight mb-1">Sophie Martin</h2>
                            <div class="flex flex-wrap justify-center sm:justify-start items-center gap-2 text-indigo-600 font-medium">
                                <span id="card-job">Architecte</span>
                                <span class="text-slate-300">•</span>
                                <span id="card-age">28 ans</span>
                                <span class="bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider ml-1 border border-indigo-100" id="card-status">Célibataire</span>
                            </div>
                        </div>
                    </div>

                    <!-- Quote -->
                    <div class="mb-6 text-center px-4 relative">
                        <div class="inline-block relative">
                            <p id="card-quote" class="handwritten text-xl md:text-2xl text-slate-700 leading-relaxed relative z-10">
                                "Je veux juste que ça marche sans réfléchir."
                            </p>
                            <div class="absolute -bottom-1 right-0 w-24 h-2 bg-pink-200/50 -rotate-2 rounded-full z-0"></div>
                        </div>
                    </div>

                    <!-- Main Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-12 gap-6 md:gap-8">
                        
                        <!-- LEFT COLUMN (Context) -->
                        <div class="md:col-span-5 space-y-5 border-r border-slate-100 md:pr-6">
                            
                            <!-- Bio -->
                            <section>
                                <h4 class="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2" id="card-lbl-bio">À propos</h4>
                                <p id="card-bio" class="text-xs text-slate-600 leading-relaxed text-justify">...</p>
                            </section>

                            <!-- Personality -->
                            <section class="bg-slate-50 p-3 rounded-lg border border-slate-100">
                                <h4 class="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3" id="card-lbl-personality">Profil</h4>
                                <div class="space-y-2">
                                    <!-- Trait 1 -->
                                    <div class="flex items-center text-[9px] gap-2">
                                        <span class="w-10 text-right text-slate-500">Intro</span>
                                        <div class="flex-1 h-1 bg-slate-200 rounded-full overflow-hidden">
                                            <div id="vis-trait-1" class="h-full bg-teal-500 rounded-full" style="width: 30%"></div>
                                        </div>
                                        <span class="w-10 text-slate-500">Extra</span>
                                    </div>
                                    <!-- Trait 2 -->
                                    <div class="flex items-center text-[9px] gap-2">
                                        <span class="w-10 text-right text-slate-500" id="card-txt-think">Rationnel</span>
                                        <div class="flex-1 h-1 bg-slate-200 rounded-full overflow-hidden">
                                            <div id="vis-trait-2" class="h-full bg-teal-500 rounded-full" style="width: 70%"></div>
                                        </div>
                                        <span class="w-10 text-slate-500" id="card-txt-feel">Émotionnel</span>
                                    </div>
                                     <!-- Trait 3 -->
                                     <div class="flex items-center text-[9px] gap-2">
                                        <span class="w-10 text-right text-slate-500" id="card-txt-passive">Passif</span>
                                        <div class="flex-1 h-1 bg-slate-200 rounded-full overflow-hidden">
                                            <div id="vis-trait-3" class="h-full bg-teal-500 rounded-full" style="width: 50%"></div>
                                        </div>
                                        <span class="w-10 text-slate-500" id="card-txt-active">Actif</span>
                                    </div>
                                </div>
                                <!-- Motivation Driver (UPDATED) -->
                                <div class="mt-3 pt-2 border-t border-slate-200/50">
                                     <div class="flex items-center justify-between text-[9px] text-slate-400 mb-1">
                                        <span id="card-txt-fun">Plaisir</span>
                                        <span class="font-bold text-teal-600">Motivation</span>
                                        <span id="card-txt-useful">Apprentissage</span>
                                     </div>
                                     <div class="h-1 bg-slate-200 rounded-full overflow-hidden w-full">
                                        <div id="vis-driver-motivation" class="h-full bg-slate-400" style="width: 50%"></div>
                                    </div>
                                </div>
                            </section>

                            <!-- Digital Habits -->
                            <section>
                                <h4 class="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2" id="card-lbl-digital">Digital</h4>
                                <!-- Devices Icons -->
                                <div class="flex gap-3 text-slate-400 mb-2" id="card-devices">
                                    <!-- Populated by JS -->
                                </div>
                                <!-- Platforms -->
                                <div id="card-platforms" class="flex flex-wrap mb-2"></div>
                                <!-- Tech Bar -->
                                <div class="flex items-center gap-2">
                                    <div class="flex-1 h-1.5 bg-slate-100 rounded-full overflow-hidden">
                                        <div id="card-tech-bar" class="h-full bg-blue-500 rounded-full" style="width: 50%"></div>
                                    </div>
                                    <span id="card-tech-text" class="text-[10px] font-bold text-blue-600">Moyen</span>
                                </div>
                            </section>

                        </div>

                        <!-- RIGHT COLUMN (Drivers & Day) -->
                        <div class="md:col-span-7 flex flex-col gap-4">
                            
                            <!-- Day in the Life -->
                            <div class="bg-pink-50/50 p-4 rounded-xl border border-pink-100">
                                <h4 class="text-[10px] font-black text-pink-400 uppercase tracking-widest mb-2 flex items-center gap-2">
                                    <i class="fa-regular fa-clock"></i> <span id="card-lbl-day">Une journée type</span>
                                </h4>
                                <p id="card-day" class="text-xs text-slate-600 italic leading-relaxed whitespace-pre-line">
                                    8h00: Se réveille...
                                </p>
                            </div>

                            <!-- Goals -->
                            <div class="bg-green-50/50 p-4 rounded-xl border border-green-100 flex-1">
                                <div class="flex items-center gap-2 mb-2">
                                    <i class="fa-solid fa-bullseye text-green-600 text-xs"></i>
                                    <h4 class="text-[10px] font-black text-green-800 uppercase tracking-wide" id="card-lbl-goals">Attentes</h4>
                                </div>
                                <ul id="card-goals-list" class="space-y-1"></ul>
                            </div>

                            <!-- Fears & Frustrations -->
                            <div class="bg-red-50/50 p-4 rounded-xl border border-red-100 flex-1">
                                <div class="flex items-center gap-2 mb-2">
                                    <i class="fa-solid fa-shield-halved text-red-600 text-xs"></i>
                                    <h4 class="text-[10px] font-black text-red-800 uppercase tracking-wide" id="card-lbl-frustrations">Peurs & Freins</h4>
                                </div>
                                <ul id="card-frustrations-list" class="space-y-1"></ul>
                            </div>

                        </div>
                    </div>
                </div>

                <!-- Footer -->
                <div class="bg-slate-50 py-2 text-center border-t border-slate-100">
                    <p class="text-[8px] text-slate-400 font-bold uppercase tracking-[0.2em]">VI-ACT Persona Builder</p>
                </div>
            </div>

            <p class="mt-4 text-xs text-slate-400 italic no-print w-full text-center">
                Astuce : Cliquez sur "Télécharger PDF", puis choisissez "Enregistrer au format PDF" dans la destination.
            </p>

        </div>

    </main>

    <script>
        // --- CONFIG ---
        let currentLang = 'fr';
        let avatarOffset = 0; 

        const i18n = {
            fr: {
                navTitle: "VI-ACT Persona Builder",
                introTitle: "Définition du Profil",
                btnMagic: "Génération Magique",
                btnPrint: "Télécharger PDF",
                
                labels: {
                    sections: { id: "Identité", narrative: "Narratif & Contexte", digital: "Habitudes Digitales", psych: "Psychologie & Motivations" },
                    fields: { 
                        name: "Prénom & Nom Fictif", job: "Activité / Rôle", age: "Âge", status: "Situation", 
                        quote: "La Citation (Verbatim)", bio: "Bio Courte", day: "Une journée dans sa vie",
                        tech: "Aisance Numérique", platforms: "Plateformes & App favorites", interests: "Centres d'intérêt (tags)",
                        introvert: "Introverti", extrovert: "Extroverti",
                        think: "Rationnel", feel: "Émotionnel",
                        passive: "Passif", active: "Actif",
                        motivation: "Type de Motivation", fun: "Fun / Plaisir", useful: "Utile / Apprentissage",
                        goals: "Attentes / Objectifs", frustrations: "Peurs & Freins"
                    },
                    card: {
                        bio: "À PROPOS", day: "UNE JOURNÉE TYPE", 
                        personality: "PROFIL", digital: "DIGITAL", 
                        goals: "ATTENTES & MOTIVATIONS", frustrations: "PEURS & FREINS",
                        think: "Rationnel", feel: "Émotionnel",
                        passive: "Passif", active: "Actif",
                        fun: "Plaisir", useful: "Apprentissage"
                    },
                    options: {
                        single: "Célibataire", married: "En couple", parents: "Avec enfants", 
                        student: "Étudiant", lycee: "Lycéen", college: "Collégien", working: "Jeune Actif"
                    },
                    levels: ["Novice", "Débutant", "Intermédiaire", "Avancé", "Expert"]
                }
            },
            en: {
                navTitle: "VI-ACT Persona Builder",
                introTitle: "Profile Definition",
                btnMagic: "Magic Generate",
                btnPrint: "Download PDF",
                
                labels: {
                    sections: { id: "Identity", narrative: "Narrative & Context", digital: "Digital Habits", psych: "Psychology & Motivations" },
                    fields: { 
                        name: "Fictional Name", job: "Role / Activity", age: "Age", status: "Status", 
                        quote: "Key Quote", bio: "Short Bio", day: "A Day in the Life",
                        tech: "Tech Savviness", platforms: "Favorite Platforms & Apps", interests: "Interests (tags)",
                        introvert: "Introvert", extrovert: "Extrovert",
                        think: "Rational", feel: "Emotional",
                        passive: "Passive", active: "Active",
                        motivation: "Motivation Type", fun: "Fun / Pleasure", useful: "Useful / Learning",
                        goals: "Expectations / Goals", frustrations: "Fears & Barriers"
                    },
                    card: {
                        bio: "ABOUT", day: "A DAY IN THE LIFE", 
                        personality: "PROFILE", digital: "DIGITAL", 
                        goals: "EXPECTATIONS & DRIVERS", frustrations: "FEARS & BARRIERS",
                        think: "Rational", feel: "Emotional",
                        passive: "Passive", active: "Active",
                        fun: "Fun", useful: "Learning"
                    },
                    options: {
                        single: "Single", married: "Couple", parents: "Has kids", 
                        student: "Student", lycee: "High Schooler", college: "Middle Schooler", working: "Young Pro"
                    },
                    levels: ["Novice", "Beginner", "Intermediate", "Advanced", "Expert"]
                }
            }
        };

        // Two datasets for archetypes to support bilingual magic generation
        const archetypesData = {
            fr: [
                {
                    name: "Léa Dubois", job: "Lycéenne", age: 16, status: "lycee",
                    quote: "J'aimerais faire un projet, mais je ne sais pas par où commencer.",
                    bio: "Léa est une élève sérieuse mais timide. Elle passe beaucoup de temps sur Instagram et TikTok. Elle aimerait s'engager mais a peur du jugement des autres.",
                    day: "7h: Réveil, check réseaux sociaux.\n8h-17h: Cours au lycée.\n17h30: Rentre chez elle, devoirs.\n20h: Dîner en famille.\n21h30: Discussion avec ses amies sur Snap.",
                    goals: "Rencontrer de nouvelles personnes\nPrendre confiance en elle\nFaire quelque chose d'utile",
                    frustrations: "Peur de ne pas être à la hauteur\nNe connait personne dans le groupe\nCrainte que ce soit 'trop scolaire'",
                    tech: 85, intro: 70, think: 40, passive: 60, driverMotivation: 20, // More Fun/Social
                    platforms: "Instagram, TikTok, Snapchat", interests: "Mode, Musique, Animaux",
                    devices: ["mobile"]
                },
                {
                    name: "Enzo Martin", job: "Étudiant", age: 20, status: "student",
                    quote: "On est là pour bouger les choses, non ?",
                    bio: "Enzo est très actif dans la vie associative. Il cherche à développer son réseau et à monter en compétences pour son futur CV.",
                    day: "9h: Cours à la fac.\n12h: Déjeuner au RU avec l'asso.\n16h: Sport.\n19h: Réunion de préparation de projet.\n23h: Gaming ou révisions.",
                    goals: "Acquérir des compétences (gestion de projet)\nAvoir un impact réel\nValoriser son expérience",
                    frustrations: "Les réunions qui durent trop longtemps\nLe manque de budget\nL'inertie administrative",
                    tech: 80, intro: 20, think: 70, passive: 10, driverMotivation: 80, // More Useful/Learning
                    platforms: "Instagram, Discord, LinkedIn", interests: "Sport, Entrepreneuriat, Voyage",
                    devices: ["mobile", "desktop"]
                },
                {
                    name: "Sarah Benali", job: "Jeune Active", age: 23, status: "working",
                    quote: "Je cherche une activité qui a du sens, pour décompresser du boulot.",
                    bio: "Sarah vient de commencer son premier job. Elle se sent un peu isolée dans sa nouvelle ville et cherche à s'intégrer via des activités bénévoles.",
                    day: "8h30: Travail.\n18h: Sortie du bureau, transports.\n19h: Cherche une activité ou sport.\n21h: Netflix.",
                    goals: "Se faire des amis hors du travail\nSe sentir utile\nDécouvrir la ville",
                    frustrations: "Horaires incompatibles avec le travail\nEngagement trop contraignant\nPeur de tomber sur un groupe fermé",
                    tech: 60, intro: 50, think: 50, passive: 40, driverMotivation: 50, // Balanced
                    platforms: "Instagram, Facebook, WhatsApp", interests: "Cuisine, Art, Nature",
                    devices: ["mobile", "tablet"]
                }
            ],
            en: [
                {
                    name: "Léa Dubois", job: "High School Student", age: 16, status: "lycee",
                    quote: "I'd like to start a project, but I don't know where to begin.",
                    bio: "Léa is a serious but shy student. She spends a lot of time on Instagram and TikTok. She wants to get involved but fears judgment from others.",
                    day: "7am: Wake up, check social media.\n8am-5pm: School.\n5:30pm: Home, homework.\n8pm: Family dinner.\n9:30pm: Chatting with friends on Snap.",
                    goals: "Meet new people\nBuild self-confidence\nDo something useful",
                    frustrations: "Fear of not being good enough\nDoesn't know anyone in the group\nFear that it's 'too much like school'",
                    tech: 85, intro: 70, think: 40, passive: 60, driverMotivation: 20,
                    platforms: "Instagram, TikTok, Snapchat", interests: "Fashion, Music, Animals",
                    devices: ["mobile"]
                },
                {
                    name: "Enzo Martin", job: "College Student", age: 20, status: "student",
                    quote: "We're here to make things happen, right?",
                    bio: "Enzo is very active in student associations. He wants to build his network and gain skills for his future resume.",
                    day: "9am: Classes.\n12pm: Lunch with the club.\n4pm: Sports.\n7pm: Project planning meeting.\n11pm: Gaming or studying.",
                    goals: "Gain skills (project management)\nHave a real impact\nBoost his resume",
                    frustrations: "Meetings that drag on\nLack of budget\nAdministrative inertia",
                    tech: 80, intro: 20, think: 70, passive: 10, driverMotivation: 80,
                    platforms: "Instagram, Discord, LinkedIn", interests: "Sports, Entrepreneurship, Travel",
                    devices: ["mobile", "desktop"]
                },
                {
                    name: "Sarah Benali", job: "Young Professional", age: 23, status: "working",
                    quote: "I'm looking for a meaningful activity to decompress from work.",
                    bio: "Sarah just started her first job. She feels a bit isolated in her new city and is looking to integrate through volunteer activities.",
                    day: "8:30am: Work.\n6pm: Leave office, commute.\n7pm: Looking for activities or gym.\n9pm: Netflix.",
                    goals: "Make friends outside of work\nFeel useful\nDiscover the city",
                    frustrations: "Schedules incompatible with work\nCommitment too demanding\nFear of joining a clique",
                    tech: 60, intro: 50, think: 50, passive: 40, driverMotivation: 50,
                    platforms: "Instagram, Facebook, WhatsApp", interests: "Cooking, Art, Nature",
                    devices: ["mobile", "tablet"]
                }
            ]
        };

        // --- CORE FUNCTIONS ---

        function setLang(lang) {
            currentLang = lang;
            const t = i18n[lang];

            // UI Updates
            document.getElementById('nav-title').innerText = t.navTitle;
            document.getElementById('intro-title').innerText = t.introTitle;
            document.getElementById('btn-magic').innerText = t.btnMagic;
            document.getElementById('btn-print').innerHTML = `<i class="fa-solid fa-file-pdf"></i> ${t.btnPrint}`;

            // Labels form
            document.getElementById('sec-identity').innerText = t.labels.sections.id;
            document.getElementById('sec-narrative').innerText = t.labels.sections.narrative;
            document.getElementById('sec-digital').innerText = t.labels.sections.digital;
            document.getElementById('sec-psych').innerText = t.labels.sections.psych;
            
            document.getElementById('lbl-name').innerText = t.labels.fields.name;
            document.getElementById('lbl-job').innerText = t.labels.fields.job;
            document.getElementById('lbl-age').innerText = t.labels.fields.age;
            document.getElementById('lbl-status').innerText = t.labels.fields.status;
            document.getElementById('lbl-quote').innerText = t.labels.fields.quote;
            document.getElementById('lbl-bio').innerText = t.labels.fields.bio;
            document.getElementById('lbl-day').innerText = t.labels.fields.day;
            document.getElementById('lbl-tech').innerText = t.labels.fields.tech;
            document.getElementById('lbl-platforms').innerText = t.labels.fields.platforms;
            document.getElementById('lbl-interests').innerText = t.labels.fields.interests;
            document.getElementById('lbl-goals').innerText = t.labels.fields.goals;
            document.getElementById('lbl-frustrations').innerText = t.labels.fields.frustrations;
            
            document.getElementById('lbl-introvert').innerText = t.labels.fields.introvert;
            document.getElementById('lbl-extrovert').innerText = t.labels.fields.extrovert;
            document.getElementById('lbl-thinking').innerText = t.labels.fields.think;
            document.getElementById('lbl-feeling').innerText = t.labels.fields.feel;
            document.getElementById('lbl-passive').innerText = t.labels.fields.passive;
            document.getElementById('lbl-active').innerText = t.labels.fields.active;
            
            document.getElementById('lbl-motivation').innerText = t.labels.fields.motivation;
            document.getElementById('lbl-fun').innerText = t.labels.fields.fun;
            document.getElementById('lbl-useful').innerText = t.labels.fields.useful;

            // Labels Card
            document.getElementById('card-lbl-bio').innerText = t.labels.card.bio;
            document.getElementById('card-lbl-day').innerText = t.labels.card.day;
            document.getElementById('card-lbl-personality').innerText = t.labels.card.personality;
            document.getElementById('card-lbl-digital').innerText = t.labels.card.digital;
            document.getElementById('card-lbl-goals').innerText = t.labels.card.goals;
            document.getElementById('card-lbl-frustrations').innerText = t.labels.card.frustrations;
            
            document.getElementById('card-txt-think').innerText = t.labels.card.think;
            document.getElementById('card-txt-feel').innerText = t.labels.card.feel;
            document.getElementById('card-txt-passive').innerText = t.labels.card.passive;
            document.getElementById('card-txt-active').innerText = t.labels.card.active;
            document.getElementById('card-txt-fun').innerText = t.labels.card.fun;
            document.getElementById('card-txt-useful').innerText = t.labels.card.useful;

            // Select Options
            const select = document.getElementById('input-status');
            const val = select.value;
            select.innerHTML = Object.entries(t.labels.options).map(([k, v]) => 
                `<option value="${k}">${v}</option>`
            ).join('');
            
            Array.from(select.options).forEach(opt => {
                if(opt.value === val) opt.selected = true;
            });

            // Styling buttons
            document.getElementById('btn-fr').className = lang === 'fr' 
                ? "px-4 py-1.5 rounded-full text-xs font-bold transition-all bg-white shadow-sm text-indigo-600"
                : "px-4 py-1.5 rounded-full text-xs font-bold transition-all text-slate-500 hover:text-indigo-600";
            document.getElementById('btn-en').className = lang === 'en' 
                ? "px-4 py-1.5 rounded-full text-xs font-bold transition-all bg-white shadow-sm text-indigo-600"
                : "px-4 py-1.5 rounded-full text-xs font-bold transition-all text-slate-500 hover:text-indigo-600";

            updatePreview();
        }

        function resetAvatarOffset() {
            avatarOffset = 0;
        }

        function changeAvatar(direction) {
            avatarOffset += direction;
            updatePreview();
        }

        function updatePreview() {
            // -- Inputs --
            const name = document.getElementById('input-name').value || "Nom Fictif";
            const job = document.getElementById('input-job').value || "Activité";
            const age = document.getElementById('input-age').value || "--";
            const statusKey = document.getElementById('input-status').value;
            const quote = document.getElementById('input-quote').value || "Une citation marquante...";
            const bio = document.getElementById('input-bio').value || "...";
            const day = document.getElementById('input-day').value || "8h: ...\n12h: ...\n18h: ...";
            const techVal = document.getElementById('input-tech').value;
            const introVal = document.getElementById('input-intro-extra').value || 50;
            const thinkVal = document.getElementById('input-think-feel').value || 50;
            const passiveVal = document.getElementById('input-passive-active').value || 50;
            const driverMotivation = document.getElementById('input-driver-motivation').value || 50;
            const interestsRaw = document.getElementById('input-interests').value;
            const platformsRaw = document.getElementById('input-platforms').value;
            
            // -- Translation Lookups --
            const statusLabel = i18n[currentLang].labels.options[statusKey] || statusKey;
            
            // -- DOM Updates (Text) --
            document.getElementById('card-name').innerText = name;
            document.getElementById('card-job').innerText = job;
            document.getElementById('card-age').innerText = `${age} ${currentLang === 'fr' ? 'ans' : 'y/o'}`;
            document.getElementById('card-status').innerText = statusLabel;
            document.getElementById('card-quote').innerText = `"${quote}"`;
            document.getElementById('card-bio').innerText = bio;
            document.getElementById('card-day').innerText = day;

            // -- Visuals --
            // Avatar
            const seed = (name.replace(/\s/g, '') || "default") + avatarOffset;
            document.getElementById('card-avatar').src = `https://api.dicebear.com/7.x/avataaars/svg?seed=${seed}&backgroundColor=eef2ff`;

            // Tech Bar
            document.getElementById('card-tech-bar').style.width = `${techVal}%`;
            const levels = i18n[currentLang].labels.levels;
            const lvlIdx = Math.min(Math.floor(techVal / 20), 4);
            document.getElementById('card-tech-text').innerText = levels[lvlIdx];

            // Personality Bars
            document.getElementById('vis-trait-1').style.width = `${introVal}%`;
            document.getElementById('vis-trait-2').style.width = `${thinkVal}%`;
            document.getElementById('vis-trait-3').style.width = `${passiveVal}%`;
            document.getElementById('vis-driver-motivation').style.width = `${driverMotivation}%`;

            // Devices Icons
            const devicesDiv = document.getElementById('card-devices');
            devicesDiv.innerHTML = '';
            if(document.getElementById('chk-mobile').checked) devicesDiv.innerHTML += '<i class="fa-solid fa-mobile-screen text-indigo-500"></i>';
            if(document.getElementById('chk-desktop').checked) devicesDiv.innerHTML += '<i class="fa-solid fa-desktop text-indigo-500"></i>';
            if(document.getElementById('chk-tablet').checked) devicesDiv.innerHTML += '<i class="fa-solid fa-tablet-screen-button text-indigo-500"></i>';
            if(devicesDiv.innerHTML === '') devicesDiv.innerHTML = '<span class="text-[9px] italic">Aucun</span>';

            // Platforms
            const platformsDiv = document.getElementById('card-platforms');
            platformsDiv.innerHTML = '';
            if(platformsRaw) {
                platformsRaw.split(',').forEach(p => {
                    if(p.trim()) platformsDiv.innerHTML += `<span class="tag-pill">${p.trim()}</span>`;
                });
            }

            // Interests (Header)
            const interestsDiv = document.getElementById('header-interests');
            interestsDiv.innerHTML = '';
            if(interestsRaw) {
                interestsRaw.split(',').forEach(i => {
                    if(i.trim()) interestsDiv.innerHTML += `<span class="bg-white/20 backdrop-blur-sm text-white px-2 py-0.5 rounded text-[9px] border border-white/30">${i.trim()}</span>`;
                });
            }

            // -- Lists --
            const processList = (inputInfo, targetId, colorClass, iconClass) => {
                const target = document.getElementById(targetId);
                target.innerHTML = '';
                const lines = inputInfo.split('\n').filter(l => l.trim());
                if(lines.length === 0) target.innerHTML = `<li class="text-[10px] text-slate-400 italic">...</li>`;
                else lines.forEach(line => {
                    const li = document.createElement('li');
                    li.className = "text-[10px] text-slate-600 flex gap-1.5 items-start leading-tight";
                    li.innerHTML = `<i class="${iconClass} ${colorClass} text-[8px] mt-0.5 shrink-0"></i> <span>${line.replace(/^-/,'')}</span>`;
                    target.appendChild(li);
                });
            };

            processList(document.getElementById('input-goals').value, 'card-goals-list', 'text-green-500', 'fa-solid fa-check');
            processList(document.getElementById('input-frustrations').value, 'card-frustrations-list', 'text-red-500', 'fa-solid fa-bolt');
        }

        function generateRandom() {
            // Pick from the correct language dataset
            const dataset = archetypesData[currentLang];
            const p = dataset[Math.floor(Math.random() * dataset.length)];
            
            document.getElementById('input-name').value = p.name;
            document.getElementById('input-job').value = p.job;
            document.getElementById('input-age').value = p.age;
            
            const statusOpts = document.getElementById('input-status').options;
            for(let i=0; i<statusOpts.length; i++) {
                if(statusOpts[i].value === p.status) document.getElementById('input-status').selectedIndex = i;
            }

            document.getElementById('input-quote').value = p.quote;
            document.getElementById('input-bio').value = p.bio;
            document.getElementById('input-day').value = p.day;
            document.getElementById('input-goals').value = p.goals;
            document.getElementById('input-frustrations').value = p.frustrations;
            
            document.getElementById('input-tech').value = p.tech;
            document.getElementById('input-platforms').value = p.platforms;
            document.getElementById('input-interests').value = p.interests;
            
            document.getElementById('input-intro-extra').value = p.intro;
            document.getElementById('input-think-feel').value = p.think;
            document.getElementById('input-passive-active').value = p.passive;
            document.getElementById('input-driver-motivation').value = p.driverMotivation;

            // Reset checkboxes
            ['mobile', 'desktop', 'tablet'].forEach(d => document.getElementById('chk-'+d).checked = false);
            if(p.devices) p.devices.forEach(d => {
                if(document.getElementById('chk-'+d)) document.getElementById('chk-'+d).checked = true;
            });
            
            avatarOffset = 0;
            updatePreview();
        }

        function resetForm() {
            document.querySelectorAll('input, textarea').forEach(el => {
                if(el.type !== 'range' && el.type !== 'checkbox') el.value = '';
            });
            document.querySelectorAll('input[type=checkbox]').forEach(el => el.checked = false);
            document.querySelectorAll('input[type=range]').forEach(el => el.value = 50);
            updatePreview();
        }

        // Init
        window.onload = () => {
            setLang('fr');
            generateRandom();
        }

    </script>
</body>
</html>
